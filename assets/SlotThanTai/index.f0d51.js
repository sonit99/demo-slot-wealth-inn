window.__require=function t(e,i,n){function o(a,c){if(!i[a]){if(!e[a]){var l=a.split("/");if(l=l[l.length-1],!e[l]){var r="function"==typeof __require&&__require;if(!c&&r)return r(l,!0);if(s)return s(l,!0);throw new Error("Cannot find module '"+a+"'")}a=l}var u=i[a]={exports:{}};e[a][0].call(u.exports,function(t){return o(e[a][1][t]||t)},u,u.exports,t,e,i,n)}return i[a].exports}for(var s="function"==typeof __require&&__require,a=0;a<n.length;a++)o(n[a]);return o}({"SlotTT.CellAnim":[function(t,e,i){"use strict";cc._RF.push(e,"e7106fzOc5MqILcwhLRkXs/","SlotTT.CellAnim");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=this&&this.__decorate||function(t,e,i,n){var o,s=arguments.length,a=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(a=(s<3?o(a):s>3?o(e,i,a):o(e,i))||a);return s>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(i,"__esModule",{value:!0});var a=t("./SlotTT.Common"),c=t("./SlotTT.SlotMachine"),l=cc._decorator,r=l.ccclass,u=l.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.skeletonCharacter=null,e._index=0,e.itemCell=null,e}return o(e,t),Object.defineProperty(e.prototype,"index",{get:function(){return this._index},set:function(t){this._index=t},enumerable:!1,configurable:!0}),e.prototype.getItemCell=function(){return this.itemCell},e.prototype.setItemCell=function(t){this.itemCell=t},e.prototype.setAnim=function(t){0===this.itemCell.id?this.skeletonCharacter.skeletonData=c.default.instance.listSyms[this.itemCell.id]:this.skeletonCharacter.skeletonData=c.default.instance.listSyms[this.itemCell.id-3],this.skeletonCharacter.defaultSkin="default",this.skeletonCharacter.loop=!0,this.skeletonCharacter.defaultAnimation=t,this.skeletonCharacter.setAnimation(0,t,!0)},e.prototype.setRandom=function(t){var e=a.default.getRandomNumber(4,9);this.skeletonCharacter.skeletonData=c.default.instance.listSyms[e-3],this.skeletonCharacter.defaultSkin="default",this.skeletonCharacter.loop=!0,this.skeletonCharacter.defaultAnimation=t,this.skeletonCharacter.setAnimation(0,t,!0)},s([u(sp.Skeleton)],e.prototype,"skeletonCharacter",void 0),s([r],e)}(cc.Component);i.default=p,cc._RF.pop()},{"./SlotTT.Common":"SlotTT.Common","./SlotTT.SlotMachine":"SlotTT.SlotMachine"}],"SlotTT.Cmd":[function(t,e,i){"use strict";cc._RF.push(e,"147f96ywxJBL6AjNupTUHMs","SlotTT.Cmd");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(i,"__esModule",{value:!0}),i.SlotCmd=void 0;var s=t("./SlotTT.Connector");(function(t){var e;(function(t){t[t.UP=1]="UP",t[t.DOWN=-1]="DOWN"})(t.Direction||(t.Direction={}));var i=function(){function t(){}return t.CMD_SLOT_LOGIN=1,t.CMD_SLOT_LOGOUT=2,t.CMD_SLOT_DISCONNECTED=37,t.CMD_SLOT_JOIN_ROOM=5001,t.CMD_SLOT_GAME_INFO=5002,t.CMD_SLOT_JACKPOT_INFO=5003,t.CMD_SLOT_ROUND_RESULT=5004,t.CMD_SLOT_BET_FAILED=5005,t.CMD_SLOT_OPEN_JACKPOT=5006,t.CMD_SLOT_EXITGAME=500,t.CMD_SLOT_KICK_OUT=5014,t}();t.Cmd=i;var n=function(){function t(){}return t.KHOI_DONG=0,t.DANG_QUAY=1,t.KET_THUC=2,t}();t.STATE_OF_SPIN=n;var a=function(){function t(){}return t.ACTIVE="active",t.DEFAULT="default",t.SPIN="spin",t.IDLE="idle",t.SPIN_STOP="spin_stop",t}();t.STATE_OF_ANIM=a;var c=function(){function t(){}return t.JACKPOT=1,t.SCATTER=2,t.WILD=3,t.PEACH=4,t.EMERALD=5,t.GOLD=6,t.YELLOW=7,t.RED=8,t.GREEN=9,t.ANY=10,t.ANIM_CHARACTER=((e={})[t.SCATTER]={name:"SCATTER",active:"active",default:"default",spin:"spin"},e[t.WILD]={name:"WILD",active:"active",default:"default",idle:"idle",spin:"spin"},e[t.PEACH]={name:"PEACH",active:"active",default:"default",spin:"spin"},e[t.EMERALD]={name:"EMERALD",active:"active",default:"default",spin:"spin"},e[t.GOLD]={name:"GOLD",active:"active",default:"default",spin:"spin"},e[t.YELLOW]={name:"YELLOW",active:"active",default:"default",spin:"spin"},e[t.RED]={name:"RED",active:"active",default:"default",spin:"spin"},e[t.GREEN]={name:"GREEN",active:"active",default:"default",spin:"spin"},e),t}();t.DEFINE_CHARACTER=c;var l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.unpack=function(){},e}(BGUI.BaseInPacket);t.SlotReceiveLogin=l;var r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.betAmount=0,e.currentMoney=0,e.isJackpot=!1,e.isFreeGame=!1,e}return o(e,t),e.prototype.unpack=function(){this.betAmount=this.getLong(),this.currentMoney=this.getLong(),this.isJackpot=this.getBool(),this.isFreeGame=this.getBool()},e}(BGUI.BaseInPacket);t.SlotReceiveGameInfo=r;var u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.reason=null,e.isOut=null,e}return o(e,t),e.prototype.unpack=function(){this.reason=this.getByte(),this.isOut=this.getBool()},e}(BGUI.BaseInPacket);t.SlotReceiveUserOut=u;var p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.betAmount=0,e.listJackpot=[],e}return o(e,t),e.prototype.unpack=function(){this.betAmount=this.getLong();for(var t=0;t<2;t++){var e=this.getLong();this.listJackpot.push(e)}},e}(BGUI.BaseInPacket);t.SlotReceiveJackpotInfo=p;var h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.listSize=0,e.resultSize=0,e.type=0,e.data={betAmount:-1,itemList:[],resultList:[],amountProfit:-1,currentMoney:-1},e}return o(e,t),e.prototype.unpack=function(){if(0==this.getError()){this.data.betAmount=this.getLong(),this.listSize=this.getByte();for(var t=0;t<this.listSize;t++){var e={index:t,id:this.getByte(),highlight:this.getBool()};this.data.itemList.push(e)}this.resultSize=this.getByte();for(var i=0;i<this.resultSize;i++){var n={id:this.getByte(),moneyWin:this.getLong()};this.data.resultList.push(n)}this.type=this.getByte(),this.data.amountProfit=this.getLong(),this.data.currentMoney=this.getLong()}},e}(BGUI.BaseInPacket);t.SlotReceiveRoundResult=h;var d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.error=null,e}return o(e,t),e.prototype.unpack=function(){this.error=this.getError()},e}(BGUI.BaseInPacket);t.SlotReceiveBetFailed=d;var f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.idJackpot=0,e.nameJackpot="",e.winMoney=0,e.currentMoney=0,e}return o(e,t),e.prototype.unpack=function(){this.idJackpot=this.getByte(),this.nameJackpot=this.getString(),this.winMoney=this.getLong(),this.currentMoney=this.getLong()},e}(BGUI.BaseInPacket);t.SlotReceiveJackpotResult=f;var g=function(){function t(){}return t.sendSlotJoinGame=function(t){void 0===t&&(t=0);var e=new y;e.betAmount=t,s.SlotTTConnector.instance.sendPacket(e)},t.sendSlotBet=function(t){var e=new _;e.betAmount=t,s.SlotTTConnector.instance.sendPacket(e)},t.sendOpenJackpot=function(){var t=new T;s.SlotTTConnector.instance.sendPacket(t)},t.sendSlotLogin=function(){var t=new m;t.nickName=BGUI.UserManager.instance.mainUserInfo.nickname,t.accessToken=BGUI.UserManager.instance.mainUserInfo.accessToken,s.SlotTTConnector.instance.sendPacket(t)},t.sendSlotLoginByUrl=function(t,e,i){var n=new S;n.appId=11,n.partner=t,n.accessToken=e,n.lang=i,s.SlotTTConnector.instance.sendPacket(n)},t}();t.Send=g;var S=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.getCmdId=function(){return 1},e.prototype.putData=function(){this.putString(this.partner),this.putString(this.accessToken),this.putInt(this.appId),this.putString(this.lang)},e}(BGUI.BaseOutPacket);t.SlotLoginByUrl=S;var y=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.getCmdId=function(){return i.CMD_SLOT_JOIN_ROOM},e.prototype.putData=function(){this.putInt(this.betAmount)},e}(BGUI.BaseOutPacket);t.SlotSendJoinGame=y;var _=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.getCmdId=function(){return i.CMD_SLOT_ROUND_RESULT},e.prototype.putData=function(){this.putInt(this.betAmount)},e}(BGUI.BaseOutPacket);t.SlotSendBet=_;var T=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.getCmdId=function(){return i.CMD_SLOT_OPEN_JACKPOT},e.prototype.putData=function(){},e}(BGUI.BaseOutPacket);t.SlotSendOpenJackpot=T;var m=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.getCmdId=function(){return 1},e.prototype.putData=function(){this.putString(this.nickName),this.putString(this.accessToken)},e}(BGUI.BaseOutPacket);t.SendSlotLogin=m})(i.SlotCmd||(i.SlotCmd={})),cc._RF.pop()},{"./SlotTT.Connector":"SlotTT.Connector"}],"SlotTT.Column":[function(t,e,i){"use strict";cc._RF.push(e,"3f562qQcMBJUJ6g9b5mQvyY","SlotTT.Column");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=this&&this.__decorate||function(t,e,i,n){var o,s=arguments.length,a=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(a=(s<3?o(a):s>3?o(e,i,a):o(e,i))||a);return s>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(i,"__esModule",{value:!0}),i.Direction=void 0;var a,c=t("./SlotTT.CellAnim"),l=t("./SlotTT.Cmd"),r=t("./SlotTT.Controller"),u=t("./SlotTT.Music"),p=t("./SlotTT.SlotMachine"),h=cc._decorator,d=h.ccclass,f=h.property;(function(t){t[t.Up=0]="Up",t[t.Down=1]="Down"})(a=i.Direction||(i.Direction={}));var g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.nRotate=null,e.nContainer=null,e.ske=null,e.prfCellAnim=null,e._index=0,e._spinDirection=a.Down,e.stopSpinning=!1,e.resultOfCol=null,e.heightCell=200,e.listXPosOfCell=[10,-10],e.listYPosOfCell=[200,0,-200],e.count=0,e.numberRotation=35,e.status=l.SlotCmd.STATE_OF_SPIN.KHOI_DONG,e}return o(e,t),Object.defineProperty(e.prototype,"spinDirection",{get:function(){return this._spinDirection},set:function(t){this._spinDirection=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"index",{get:function(){return this._index},set:function(t){this._index=t},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){this.nContainer.removeAllChildren()},e.prototype.createColumnAnim=function(t){this.status=l.SlotCmd.STATE_OF_SPIN.DANG_QUAY,this.resultOfCol=t,this.nContainer.removeAllChildren();for(var e=0;e<3;e++){var i=cc.instantiate(this.prfCellAnim),n=cc.v2(0,this.listYPosOfCell[e]);if(1!==e)switch(this.index){case 0:n.x=18;break;case 2:n.x=-18}i.setPosition(n),this.calcTheResultsAnim(i,!0),i.name=e.toString()+"-"+this.node.name,p.default.instance.cellsAnim.push(i),this.nContainer.addChild(i)}this.status=l.SlotCmd.STATE_OF_SPIN.KET_THUC},e.prototype.getDirection=function(){return this.spinDirection===a.Down?-1:1},e.prototype.spinVirtual=function(t){this.numberRotation=60,this.status=l.SlotCmd.STATE_OF_SPIN.KHOI_DONG,this.doSpin(t),u.default.instance.playLoop(u.SLOT_SOUND_TYPE.REEL_SPIN)},e.prototype.pushData=function(t,e){this.count=0,this.status=l.SlotCmd.STATE_OF_SPIN.DANG_QUAY,this.numberRotation=30,this.resultOfCol=t,r.default.instance.isTurbo?this.numberRotation=3:this.numberRotation+=30*e},e.prototype.doSpin=function(t){var e=this;this.ske.node.active=!0,this.nContainer.children.forEach(function(i){var n=e.getDirection(),o=cc.v3(e.getX(i),e.heightCell*n,0);cc.tween(i).delay(t).by(.1,{position:o},{easing:"backIn"}).then(cc.tween(i).call(function(){e.changeCallBack(i)})).then(cc.tween(i).call(function(){e.checkEndCallback(i)})).start()})},e.prototype.checkEndCallback=function(t){r.default.instance.isForceStop||this.numberRotation<=0?this.brakeSuddenly(t):this.loopSpin(t)},e.prototype.loopSpin=function(t){var e=this,i=this.getDirection(),n=cc.v3(this.getX(t),this.heightCell*i,0);this.status==l.SlotCmd.STATE_OF_SPIN.DANG_QUAY&&(this.numberRotation-=1),cc.tween(t).repeat(1,cc.tween().by(.05,{position:n}).call(function(){e.changeCallBack(t)})).call(function(){e.checkEndCallback(t)}).start()},e.prototype.brakeSuddenly=function(t){var e=this,i=this.getDirection(),n=cc.v3(this.getX(t),this.heightCell*i,0);cc.tween(t).repeat(2,cc.tween().by(.05,{position:n}).call(function(){e.changeCallBack(t)})).by(.06,{position:n},{easing:"backIn"}).call(function(){e.changeCallBack(t,!0)}).start()},e.prototype.changeCallBack=function(t,e){void 0===e&&(e=!1);var i=t.getComponent(c.default),n=this.getDirection(),o=cc.v3(this.getX(t),-1*this.heightCell*n,0);if(Math.abs(t.position.y*n)>1*this.heightCell&&(i.setRandom(l.SlotCmd.STATE_OF_ANIM.SPIN),t.position=o),e){if(u.default.instance.stopPlayLoop(),r.default.instance.isTurbo)u.default.instance.playType(u.SLOT_SOUND_TYPE.REEL_INTERUPT);else switch(this.index){case 0:u.default.instance.playType(u.SLOT_SOUND_TYPE.REEL_STOP_1);break;case 1:u.default.instance.playType(u.SLOT_SOUND_TYPE.REEL_STOP_2);break;case 2:u.default.instance.playType(u.SLOT_SOUND_TYPE.REEL_STOP_3)}this.ske.node.active=!1;var s=!1;this.nContainer.children.sort(function(t,e){return e.y-t.y});for(var a=0;a<this.nContainer.childrenCount;a++){this.nContainer.children[a].zIndex=a;var h=cc.v2(0,this.listYPosOfCell[a]);if(1!==a)switch(this.index){case 0:h.x=18;break;case 2:h.x=-18}this.nContainer.children[a].setPosition(h),s=this.calcTheResultsAnim(this.nContainer.children[a],!1)}2===this.index&&s&&(this.count++,this.count%3==0&&(u.default.instance.stopPlayLoop(),p.default.instance.reward()))}},e.prototype.calcTheResultsAnim=function(t,e){var i=!1,n=t.getComponent(c.default),o=t.position.y,s=this.resultOfCol;switch(o){case this.listYPosOfCell[0]:n.setItemCell(s[0]);break;case this.listYPosOfCell[1]:n.setItemCell(s[1]);break;case this.listYPosOfCell[2]:n.setItemCell(s[2]),i=!0}return e||n.setAnim(l.SlotCmd.STATE_OF_ANIM.SPIN_STOP),this.scheduleOnce(function(){n.setAnim(l.SlotCmd.STATE_OF_ANIM.DEFAULT)},.4),i},e.prototype.getX=function(t){var e=0;switch(this.index){case 0:switch(t.y){case this.listYPosOfCell[0]:e=this.listXPosOfCell[1];break;case this.listYPosOfCell[1]:case this.listYPosOfCell[2]:e=this.listXPosOfCell[0]}break;case 2:switch(t.y){case this.listYPosOfCell[0]:e=this.listXPosOfCell[0];break;case this.listYPosOfCell[1]:case this.listYPosOfCell[2]:e=this.listXPosOfCell[1]}}return e},s([f(cc.Node)],e.prototype,"nRotate",void 0),s([f(cc.Node)],e.prototype,"nContainer",void 0),s([f(sp.Skeleton)],e.prototype,"ske",void 0),s([f({type:cc.Prefab})],e.prototype,"prfCellAnim",void 0),s([d],e)}(cc.Component);i.default=g,cc._RF.pop()},{"./SlotTT.CellAnim":"SlotTT.CellAnim","./SlotTT.Cmd":"SlotTT.Cmd","./SlotTT.Controller":"SlotTT.Controller","./SlotTT.Music":"SlotTT.Music","./SlotTT.SlotMachine":"SlotTT.SlotMachine"}],"SlotTT.Common":[function(t,e,i){"use strict";cc._RF.push(e,"37483VQRIVJ07UoP+VmFgvh","SlotTT.Common"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function t(){}return t.getRandomNumber=function(t,e){return Math.floor(Math.random()*(e-t+1))+t},t.convert2Label=function(t){if(!t||0===t)return"0";var e=t,i="";return e/1e3>=1&&(i="K",(e/=1e3)/1e3>=1&&(i="M",(e/=1e3)/1e3>=1&&(i="B",(e/=1e3)/1e3>=1&&(e/=1e3,i="T")))),this.isInt(e)||(e=e>100?e.toFixed(1):e.toFixed(2)),e+i},t.isInt=function(t){return t%1==0},t.numberWithCommas=function(t){return t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},t.numberWithOutDot=function(t){return parseInt(t.replace(/\./g,""))},t.convertStrToArray=function(t){return t.split("-").map(function(t){return t.split(";").map(Number)})},t.convert2Number=function(t){var e=t.slice(-1),i=Number(t.slice(0,-1)),n=-1;switch(e){case"K":n=1e3*i;break;case"M":n=1e6*i;break;case"B":n=1e9*i;break;case"T":n=1e12*i}return n},t.runLog=function(){for(var t,e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.isTest&&(t=BGUI.ZLog).log.apply(t,e)},t.runError=function(){for(var t,e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.isTest&&(t=BGUI.ZLog).error.apply(t,e)},t.isTest=!window.location.host.includes(".globalboss.club"),t}();i.default=n,cc._RF.pop()},{}],"SlotTT.Connector":[function(t,e,i){"use strict";cc._RF.push(e,"2803dVUaYhLtK1TZyC0nCbc","SlotTT.Connector");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=this&&this.__decorate||function(t,e,i,n){var o,s=arguments.length,a=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(a=(s<3?o(a):s>3?o(e,i,a):o(e,i))||a);return s>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(i,"__esModule",{value:!0}),i.SlotTTConnector=void 0;var a=t("../../framework/localize/LanguageMgr"),c=t("./SlotTT.Common"),l=t("./SlotTT.Controller"),r=cc._decorator,u=r.ccclass,p=(r.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.getCmdId=function(){return 1},e.prototype.putData=function(){this.putString(this.partner),this.putString(this.accessToken),this.putInt(this.appId),this.putString(this.lang)},e}(BGUI.BaseOutPacket)),h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}var i;return o(e,t),i=e,Object.defineProperty(e,"instance",{get:function(){var t=cc.Canvas.instance.node.getComponent(i);if(!t){t=cc.Canvas.instance.node.addComponent(i);var e=window.location.href,n=new URLSearchParams(e.split("?")[1]);if(e&&e.includes("?")&&n&&n.get("accessToken"))i.instance.HOST=window.location.host+"/ws-slot-wealth-inn";else if(window.location.host.includes("localhost:"))i.instance.HOST="slot-wealthinn.wiwatech.com/ws-slot-wealth-inn";else{var o=a.LanguageMgr.getString("slotthantai.connection_error2");l.default.instance.noti.active||(l.default.instance.noti.active=!0),l.default.instance.notiContent.string=o}}return t},enumerable:!1,configurable:!0}),e.prototype.onDisconnected=function(e){t.prototype.onDisconnected.call(this,e),l.default.instance.noti.active||(l.default.instance.noti.active=!0),l.default.instance.notiContent.string=a.LanguageMgr.getString("slotthantai.connection_error")},e.prototype.onFinishConnect=function(e){if(t.prototype.onFinishConnect.call(this,e),e)this.sendSlotTTLogin(),this.schedule(this.rewindDisconnectDetector);else{var i=a.LanguageMgr.getString("slotthantai.connection_error");l.default.instance.noti.active||(l.default.instance.noti.active=!0),l.default.instance.notiContent.string=i,this.unschedule(this.rewindDisconnectDetector)}},e.prototype.sendSlotTTLogin=function(){try{var t,e=window.location.href,n=new URLSearchParams(e.split("?")[1]);e&&e.includes("?")&&n&&n.get("accessToken")?((t=new p).partner=n.get("partner"),t.accessToken=n.get("accessToken"),t.appId=11,t.lang=n.get("lang"),t.lang&&""!==t.lang||(t.lang="en"),i.instance.sendPacket(t),BGUI.ZLog.error("sendSlotTTLogin URL---\x3e",t)):((t=new p).partner="global-boss",t.accessToken="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE3MTg0MjExNTQsImlhdCI6MTcwOTc4MTE1NCwiaXNzIjoiM3ZpdHc2MzUtbHV5Yi11M2JkLXdkaHBzaWw5dzc5NWg5bTkiLCJzdWIiOiJ0ZXN0X2FjY18wMDEyIiwibmlja25hbWUiOiJ0ZXN0X2FjY18wMDEyIiwiaWQiOjY1NTczMTMsInBvcnRhbCI6IkI3OSJ9.gcujD6cKKJusWReRRY1M0HOG44MVubWCp12DDYmtYKs",t.appId=11,t.lang="en",i.instance.sendPacket(t),BGUI.ZLog.error("sendSlotTTLogin URL---\x3e",t))}catch(o){c.default.runError("Error:",o)}},e.prototype.sendPacket=function(e){this.isConnected()?t.prototype.sendPacket.call(this,e):this.connect()},i=s([u],e)}(BGUI.Connector);i.SlotTTConnector=h,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}o(e,t),e.prototype.getCmdId=function(){return 1},e.prototype.putData=function(){this.putString(this.nickName),this.putString(this.accessToken)}}(BGUI.BaseOutPacket),cc._RF.pop()},{"../../framework/localize/LanguageMgr":void 0,"./SlotTT.Common":"SlotTT.Common","./SlotTT.Controller":"SlotTT.Controller"}],"SlotTT.Controller":[function(t,e,i){"use strict";cc._RF.push(e,"54e45a12UJPBaHYYr5co557","SlotTT.Controller");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=this&&this.__decorate||function(t,e,i,n){var o,s=arguments.length,a=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(a=(s<3?o(a):s>3?o(e,i,a):o(e,i))||a);return s>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(i,"__esModule",{value:!0});var a=t("../../framework/localize/LanguageMgr"),c=t("./demoData"),l=t("./SlotTT.Cmd"),r=t("./SlotTT.Common"),u=t("./SlotTT.Info"),p=t("./SlotTT.Music"),h=t("./SlotTT.SlotMachine"),d=cc._decorator,f=d.ccclass,g=d.property,S=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.pnGame=null,e.turboBtn=[],e.autoSpinBtn=[],e.jackpot=null,e.noti=null,e.menu=null,e.pnAutoSpin=null,e.btnAutoSpin=null,e.btnIncBet=null,e.btnDecBet=null,e.btnBetLvlMax=null,e.btnMenu=null,e.totalBet=null,e.lbBalance=null,e.autoSpinLbl=null,e.jackPotLbl=[],e.notiContent=null,e.prfInfo=null,e.prfSetting=null,e.autoPlaySF=[],e._scheduler=null,e._isGameActive=!0,e.hideTime=null,e.localBetAmount=-1,e.isMobile=!1,e.isTurbo=!1,e.pnInfo=null,e.isAutoSpinOn=!1,e.isAutoSpinning=!1,e.pnSetting=null,e.currentBalance=0,e.betOrdi=2,e.listBet=[1e4,2e4,3e4,5e4,1e5],e.isForceStop=!1,e.lang="",e.major=0,e.minor=0,e.previousMajor=0,e.previousMinor=0,e.isJackPot=!1,e.isDemo=!0,e.localData=null,e.localRes5004=null,e}var i;return o(e,t),i=e,e.prototype.onLoad=function(){cc.debug.setDisplayStats(!1),i.instance=this;var t=window.location.href,e=new URLSearchParams(t.split("?")[1]);t&&t.includes("?")&&e&&e.get("lang")?(this.lang=e.get("lang"),BGUI.ClientData.setString(BGUI.ClientDataKey.LANGUAGE,this.lang),a.LanguageMgr.updateLang(this.lang)):(BGUI.ClientData.setString(BGUI.ClientDataKey.LANGUAGE,"en"),a.LanguageMgr.updateLang("en")),this.isMobile=cc.sys.isMobile},e.prototype.onDestroy=function(){cc.director.getScheduler().unscheduleUpdate(this)},e.prototype.start=function(){this.initSetting(),this.initInfo(),this.initMusic(),this.initData(),this.isDemo&&(this.currentBalance=1e8,this.updateBalance(this.currentBalance),this.updateBet(),this.scheduleForLbl(0,34567890,4,!0),this.scheduleForLbl(0,4567890,4,!1)),this._scheduler=window.setInterval(this.updateOffline.bind(this),1e3/60),cc.game.on(cc.game.EVENT_SHOW,this._onShowGame,this),cc.game.on(cc.game.EVENT_HIDE,this._onHideGame,this)},e.prototype.initMusic=function(){localStorage.setItem("musicStatus","true"),p.default.instance.setMusicStatus(!0),p.default.instance.playSlotMusic(p.SLOT_MUSIC_TYPE.MAIN_MUSIC)},e.prototype.initInfo=function(){this.pnInfo=cc.instantiate(this.prfInfo),this.pnInfo.zIndex=999,this.pnInfo.opacity=0,this.pnInfo.active=!1,this.pnGame.addChild(this.pnInfo)},e.prototype.initSetting=function(){this.pnSetting=cc.instantiate(this.prfSetting),this.pnSetting.zIndex=999,this.pnSetting.active=!1,this.pnGame.addChild(this.pnSetting)},e.prototype.initData=function(){this.createData(),h.default.instance.createMachine(this.localData)},e.prototype.createData=function(){for(var t=[],e=r.default.getRandomNumber(0,3),i=0;i<e;i++){var n={id:r.default.getRandomNumber(0,7),moneyWin:0};t.push(n)}var o=[];for(i=0;i<9;i++){var s={index:i,id:r.default.getRandomNumber(4,9),highlight:!0};o.push(s)}var a={betAmount:this.listBet[this.betOrdi],itemList:o,resultList:t,amountProfit:this.listBet[this.betOrdi]*e,currentMoney:r.default.numberWithOutDot(this.lbBalance.string)-this.listBet[this.betOrdi]+this.listBet[this.betOrdi]*e};this.localData=a},e.prototype.getWinData=function(){var t=[c.DEMO_DATA.data1,c.DEMO_DATA.data2,c.DEMO_DATA.data3,c.DEMO_DATA.data4,c.DEMO_DATA.data5,c.DEMO_DATA.data6,c.DEMO_DATA.data7,c.DEMO_DATA.data8,c.DEMO_DATA.data9,c.DEMO_DATA.data10,c.DEMO_DATA.data11,c.DEMO_DATA.data12,c.DEMO_DATA.data13,c.DEMO_DATA.data14,c.DEMO_DATA.data15,c.DEMO_DATA.data16,c.DEMO_DATA.data17];return t[Math.floor(Math.random()*t.length)]},e.prototype.getLoseData=function(){var t=[c.DEMO_DATA.data18,c.DEMO_DATA.data19,c.DEMO_DATA.data20,c.DEMO_DATA.data21,c.DEMO_DATA.data22,c.DEMO_DATA.data23,c.DEMO_DATA.data24,c.DEMO_DATA.data25,c.DEMO_DATA.data26,c.DEMO_DATA.data27,c.DEMO_DATA.data28,c.DEMO_DATA.data29,c.DEMO_DATA.data30];return t[Math.floor(Math.random()*t.length)]},e.prototype.demoData=function(){var t=BGUI.Utils.randomInt(1,10);cc.log("win: ",t);var e=0,i={listLineWin:[],listMulti:[],listId:[],idHL:[]};i=t>8?this.getWinData():this.getLoseData(),cc.log("d",i);for(var n=[],o=0;o<i.listLineWin.length;o++){var s={id:i.listLineWin[o],moneyWin:i.listMulti[o]*this.listBet[this.betOrdi]};e+=s.moneyWin,n.push(s)}var a=[];for(o=0;o<9;o++){var c={index:o,id:i.listId[o],highlight:i.idHL.includes(o)};a.push(c)}var l={betAmount:this.listBet[this.betOrdi],itemList:a,resultList:n,amountProfit:e,currentMoney:r.default.numberWithOutDot(this.lbBalance.string)-this.listBet[this.betOrdi]+e};this.localData=l},e.prototype.onClickSpin=function(){var t=this;this.isDemo?(this.demoData(),h.default.instance.onClickSpin(),h.default.instance.startSpinVirtual(),this.decreaseBalance(),this.disableBtn(!1),this.scheduleOnce(function(){h.default.instance.letGo(t.localData)},1)):this.reallySpin()},e.prototype.reallySpin=function(){this.currentBalance<this.listBet[this.betOrdi]?(this.noti.active||(this.noti.active=!0),this.notiContent.string=a.LanguageMgr.getString("slotthantai.not_enough_money")):(this.isForceStop=!1,h.default.instance.onClickSpin(),h.default.instance.startSpinVirtual(),this.decreaseBalance(),this.sendBet(),this.disableBtn(!1)),this.isAutoSpinOn&&this.onClickAutoSpin()},e.prototype.decreaseBalance=function(){this.currentBalance-=this.listBet[this.betOrdi],this.updateBalance(this.currentBalance)},e.prototype.increaseBalance=function(t){this.currentBalance+=t,this.updateBalance(this.currentBalance)},e.prototype.onClickTurbo=function(){p.default.instance.playType(p.SLOT_SOUND_TYPE.BTN_CLICK),this.isTurbo=!this.isTurbo,this.updateTurbo()},e.prototype.updateTurbo=function(){this.isTurbo?(this.turboBtn[1].active=!0,this.turboBtn[0].active=!1):(this.turboBtn[0].active=!0,this.turboBtn[1].active=!1)},e.prototype.onClickInfo=function(){p.default.instance.playType(p.SLOT_SOUND_TYPE.BTN_CLICK),this.menu.active=!1,this.pnInfo.getComponent(u.default).onOpen()},e.prototype.onClickIncBet=function(){p.default.instance.playType(p.SLOT_SOUND_TYPE.BTN_CLICK),this.betOrdi+=1,this.updateBet()},e.prototype.onClickDecBet=function(){p.default.instance.playType(p.SLOT_SOUND_TYPE.BTN_CLICK),this.betOrdi-=1,this.updateBet()},e.prototype.onClickMaxBet=function(){p.default.instance.playType(p.SLOT_SOUND_TYPE.BTN_CLICK),4!==this.betOrdi&&(this.betOrdi=4,this.updateBet())},e.prototype.updateBet=function(){switch(this.betOrdi){case 0:this.btnDecBet.interactable=!1,this.btnIncBet.interactable=!0;break;case 4:this.btnIncBet.interactable=!1,this.btnDecBet.interactable=!0;break;default:this.btnIncBet.interactable=!0,this.btnDecBet.interactable=!0}var t=this.listBet[this.betOrdi];this.updateBetNum(t),t!==this.localBetAmount&&(this.isDemo||l.SlotCmd.Send.sendSlotJoinGame(t))},e.prototype.updateBetNum=function(t){this.totalBet.string=BGUI.Utils.formatMoneyWithCommaOnly(t)},e.prototype.onClickAutoSpin=function(){p.default.instance.playType(p.SLOT_SOUND_TYPE.BTN_CLICK),this.isAutoSpinOn=!this.isAutoSpinOn,this.pnAutoSpin.active=this.isAutoSpinOn},e.prototype.onClickChooseAutoSpin=function(t,e){p.default.instance.playType(p.SLOT_SOUND_TYPE.BTN_CLICK),this.runAutoSpin(parseInt(e)),this.onClickAutoSpin()},e.prototype.onClickStopAutoSpin=function(){p.default.instance.playType(p.SLOT_SOUND_TYPE.BTN_CLICK),this.btnAutoSpin.node.children[0].getComponent(cc.Sprite).spriteFrame=this.autoPlaySF[0],this.autoSpinBtn[1].active=!1,this.autoSpinBtn[0].active=!0,this.isAutoSpinning=!1,this.autoSpinLbl.string=""},e.prototype.onClickSetting=function(){p.default.instance.playType(p.SLOT_SOUND_TYPE.BTN_CLICK),this.menu.active=!1,this.pnSetting.active=!0},e.prototype.onClickMenu=function(){p.default.instance.playType(p.SLOT_SOUND_TYPE.BTN_CLICK),this.menu.active=!this.menu.active},e.prototype.disableBtn=function(t){if(t)switch(this.betOrdi){case 0:this.btnDecBet.interactable=!1,this.btnIncBet.interactable=!0;break;case 4:this.btnIncBet.interactable=!1,this.btnDecBet.interactable=!0;break;default:this.btnIncBet.interactable=!0,this.btnDecBet.interactable=!0}else this.btnDecBet.interactable=!1,this.btnIncBet.interactable=!1;this.btnBetLvlMax.interactable=t,this.btnMenu.interactable=t,this.btnAutoSpin.interactable=t,this.autoSpinBtn[0].getComponent(cc.Button).interactable=t},e.prototype.onEnable=function(){},e.prototype.onDisable=function(){},e.prototype.showError=function(t){var e=t.getError();0!==e&&r.default.runError("error",e)},e.prototype.responseLogin=function(t,e){var i=new l.SlotCmd.SlotReceiveLogin;i.unpackData(e),r.default.runError("SLOTTT LOGIN: ",(new Date).toLocaleString(),(new Date).getMilliseconds(),t,i);var n=i.getError();switch(this.showError(i),n){case 0:l.SlotCmd.Send.sendSlotJoinGame(this.listBet[this.betOrdi]);break;default:this.noti.active||(this.noti.active=!0),this.notiContent.string=a.LanguageMgr.getString("slotthantai.connection_error3")}},e.prototype.responseJoinRoom=function(){},e.prototype.responseReceiveSubcribeGame=function(t,e){var i=new l.SlotCmd.SlotReceiveGameInfo;i.unpackData(e),r.default.runError("responseReceiveSubcribeGame",(new Date).toLocaleString(),(new Date).getMilliseconds(),t,i),this.showError(i),this.currentBalance=i.currentMoney,this.updateBalance(i.currentMoney),this.localBetAmount!==i.betAmount&&(this.localBetAmount=i.betAmount,this.updateBet()),i.isJackpot&&l.SlotCmd.Send.sendOpenJackpot()},e.prototype.updateBalance=function(t){this.lbBalance.string=BGUI.Utils.formatMoneyWithCommaOnly(t)},e.prototype.responseReceiveRoundResult=function(t,e){var n=new l.SlotCmd.SlotReceiveRoundResult;if(n.unpackData(e),r.default.runError("responseReceiveRoundResult",(new Date).toLocaleString(),(new Date).getMilliseconds(),t,n),this.showError(n),0!=n.getError())return i.instance.noti.active||(this.noti.active=!0),void(this.notiContent.string=a.LanguageMgr.getString("slotthantai.spin_error"));this.localRes5004=n,this.localData=n.data,h.default.instance.letGo(n.data),2===n.type&&(this.isJackPot=!0)},e.prototype.responseReceiveBetFailed=function(t,e){var n=new l.SlotCmd.SlotReceiveBetFailed;n.unpackData(e),r.default.runError("responseReceiveBetFailed",(new Date).toLocaleString(),(new Date).getMilliseconds(),"responseReceiveBetFailed",t,n),this.showError(n),n.getError(),i.instance.noti.active||(this.noti.active=!0),this.notiContent.string=a.LanguageMgr.getString("slotthantai.spin_error")},e.prototype.runAutoSpin=function(t){this.isAutoSpinning=!0,this.btnAutoSpin.node.children[0].getComponent(cc.Sprite).spriteFrame=this.autoPlaySF[1],this.autoSpinBtn[0].active=!1,this.autoSpinBtn[1].active=!0,this.autoSpinLbl.string=t.toString(),this.onClickSpin()},e.prototype.sendBet=function(){this.disableBtn(!1),l.SlotCmd.Send.sendSlotBet(this.listBet[this.betOrdi])},e.prototype.checkAutoSpin=function(){this.isAutoSpinning&&(parseInt(this.autoSpinLbl.string)>0?(this.autoSpinLbl.string=(parseInt(this.autoSpinLbl.string)-1).toString(),this.onClickSpin()):(this.onClickStopAutoSpin(),this.disableBtn(!0)))},e.prototype.responseReceiveJackpotInfo=function(t,e){var i=new l.SlotCmd.SlotReceiveJackpotInfo;i.unpackData(e),r.default.runError("responseReceiveJackpotInfo",(new Date).toLocaleString(),(new Date).getMilliseconds(),t,i),this.showError(i),this.previousMinor=this.minor,this.previousMajor=this.major,this.minor=i.listJackpot[0],this.major=i.listJackpot[1],this.previousMajor!==this.major&&(0!==this.previousMajor?(this.jackPotLbl[1].string=BGUI.Utils.formatMoneyWithCommaOnly(this.previousMajor),this.scheduleForLbl(this.previousMajor,this.major,4,!0)):this.jackPotLbl[1].string=BGUI.Utils.formatMoneyWithCommaOnly(this.major)),this.previousMinor!==this.minor&&(0!==this.previousMinor?(this.jackPotLbl[0].string=BGUI.Utils.formatMoneyWithCommaOnly(this.previousMinor),this.scheduleForLbl(this.previousMinor,this.minor,4,!1)):this.jackPotLbl[0].string=BGUI.Utils.formatMoneyWithCommaOnly(this.minor))},e.prototype.scheduleForLbl=function(t,e,i,n){var o=t,s=e,a=(e-t)/(100*i);n?t<e?this.schedule(function t(){(o+=a)>=s?(this.unschedule(t),this.jackPotLbl[1].string=BGUI.Utils.formatMoneyWithCommaOnly(s)):this.jackPotLbl[1].string=BGUI.Utils.formatMoneyWithCommaOnly(o)},.001):t>e&&this.schedule(function t(){(o+=a)<=s?(this.unschedule(t),this.jackPotLbl[1].string=BGUI.Utils.formatMoneyWithCommaOnly(s)):this.jackPotLbl[1].string=BGUI.Utils.formatMoneyWithCommaOnly(o)},.001):t<e?this.schedule(function t(){(o+=a)>=s?(this.unschedule(t),this.jackPotLbl[0].string=BGUI.Utils.formatMoneyWithCommaOnly(s)):this.jackPotLbl[0].string=BGUI.Utils.formatMoneyWithCommaOnly(o)},.001):t>e&&this.schedule(function t(){(o+=a)<=s?(this.unschedule(t),this.jackPotLbl[0].string=BGUI.Utils.formatMoneyWithCommaOnly(s)):this.jackPotLbl[0].string=BGUI.Utils.formatMoneyWithCommaOnly(o)},.001)},e.prototype.responseOpenJackPot=function(t,e){var i=new l.SlotCmd.SlotReceiveJackpotResult;i.unpackData(e),r.default.runError("responseOpenJackPot",(new Date).toLocaleString(),(new Date).getMilliseconds(),t,i),this.showError(i),this.jackpot.active=!0,this.jackpot.getComponent(sp.Skeleton).setAnimation(0,"jackpot",!1),h.default.instance.openJackPot(i.winMoney)},e.prototype.updateOffline=function(){this._isGameActive||cc.sys.isBrowser&&cc.director.mainLoop()},e.prototype._onShowGame=function(){if(this._isGameActive=!0,cc.sys.isNative&&cc.sys.isMobile&&this.hideTime){for(var t=(performance.now()-this.hideTime)/1e3,e=0;e<t;){var i=Math.min(.1,t-e);cc.director.getScheduler().update(i),e+=i}this.hideTime=null}else cc.game.resume()},e.prototype._onHideGame=function(){this._isGameActive=!1,cc.sys.isNative&&cc.sys.isMobile?this.hideTime=performance.now():cc.game.pause()},e.instance=null,s([g(cc.Node)],e.prototype,"pnGame",void 0),s([g(cc.Node)],e.prototype,"turboBtn",void 0),s([g(cc.Node)],e.prototype,"autoSpinBtn",void 0),s([g(cc.Node)],e.prototype,"jackpot",void 0),s([g(cc.Node)],e.prototype,"noti",void 0),s([g(cc.Node)],e.prototype,"menu",void 0),s([g(cc.Node)],e.prototype,"pnAutoSpin",void 0),s([g(cc.Button)],e.prototype,"btnAutoSpin",void 0),s([g(cc.Button)],e.prototype,"btnIncBet",void 0),s([g(cc.Button)],e.prototype,"btnDecBet",void 0),s([g(cc.Button)],e.prototype,"btnBetLvlMax",void 0),s([g(cc.Button)],e.prototype,"btnMenu",void 0),s([g(cc.Label)],e.prototype,"totalBet",void 0),s([g(cc.Label)],e.prototype,"lbBalance",void 0),s([g(cc.Label)],e.prototype,"autoSpinLbl",void 0),s([g(cc.Label)],e.prototype,"jackPotLbl",void 0),s([g(cc.Label)],e.prototype,"notiContent",void 0),s([g(cc.Prefab)],e.prototype,"prfInfo",void 0),s([g(cc.Prefab)],e.prototype,"prfSetting",void 0),s([g(cc.SpriteFrame)],e.prototype,"autoPlaySF",void 0),i=s([f],e)}(cc.Component);i.default=S,cc._RF.pop()},{"../../framework/localize/LanguageMgr":void 0,"./SlotTT.Cmd":"SlotTT.Cmd","./SlotTT.Common":"SlotTT.Common","./SlotTT.Info":"SlotTT.Info","./SlotTT.Music":"SlotTT.Music","./SlotTT.SlotMachine":"SlotTT.SlotMachine","./demoData":"demoData"}],"SlotTT.Info":[function(t,e,i){"use strict";cc._RF.push(e,"fcb532x25FG8r4N3tByaPGV","SlotTT.Info");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=this&&this.__decorate||function(t,e,i,n){var o,s=arguments.length,a=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(a=(s<3?o(a):s>3?o(e,i,a):o(e,i))||a);return s>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(i,"__esModule",{value:!0});var a=t("./SlotTT.Controller"),c=t("./SlotTT.Music"),l=cc._decorator,r=l.ccclass,u=l.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.pageNode=null,e.dotNode=null,e.listBtn=[],e.listSF=[],e.listLabel=[],e.page=0,e.listX=[-100,0,100],e.currentPage=null,e.listValue=[23.5,7.25,3.5,2.25,1,.625,.375,.25],e}return o(e,t),e.prototype.onOpen=function(){this.node.active=!0,cc.tween(this.node).to(.25,{opacity:255}).start(),this.page=0,this.currentPage=this.pageNode.getChildByName(this.page.toString()),this.pageNode.getChildByName(this.page.toString()).setPosition(cc.v2(this.listX[1],0)),this.pageNode.getChildByName(this.page.toString()).opacity=255,this.changeDot(1);for(var t=1;t<this.pageNode.childrenCount;t++){var e=this.pageNode.getChildByName(t.toString());e.setPosition(cc.v2(this.listX[2],0)),e.opacity=0}this.updateLabel()},e.prototype.updateLabel=function(){for(var t=a.default.instance.listBet[a.default.instance.betOrdi],e=0;e<this.listLabel.length;e++)this.listLabel[e].string=BGUI.Utils.formatMoneyWithCommaOnly(this.listValue[e]*t)},e.prototype.close=function(){var t=this;c.default.instance.playType(c.SLOT_SOUND_TYPE.BTN_CLICK),cc.tween(this.node).to(.25,{opacity:0}).call(function(){t.node.active=!1}).start(),this.changeDot(0)},e.prototype.onClickLeft=function(){var t=this;c.default.instance.playType(c.SLOT_SOUND_TYPE.BTN_CLICK),this.page-=1,cc.tween(this.pageNode.getChildByName(this.currentPage.name)).to(.1,{position:cc.v3(this.listX[2],0,0),opacity:0},{easing:""}).start(),this.changeDot(0),this.page<0&&(this.page=5),this.currentPage=this.pageNode.getChildByName(this.page.toString()),this.changeDot(1),this.pageNode.getChildByName(this.currentPage.name).setPosition(cc.v3(this.listX[0],0,0)),this.scheduleOnce(function(){cc.tween(t.pageNode.getChildByName(t.currentPage.name)).to(.1,{position:cc.v3(t.listX[1],0,0),opacity:255},{easing:""}).start()},.05)},e.prototype.onClickRight=function(){var t=this;c.default.instance.playType(c.SLOT_SOUND_TYPE.BTN_CLICK),this.page+=1,cc.tween(this.pageNode.getChildByName(this.currentPage.name)).to(.1,{position:cc.v3(this.listX[0],0,0),opacity:0},{easing:""}).start(),this.changeDot(0),this.page>5&&(this.page=0),this.currentPage=this.pageNode.getChildByName(this.page.toString()),this.changeDot(1),this.pageNode.getChildByName(this.currentPage.name).setPosition(cc.v3(this.listX[2],0,0)),this.scheduleOnce(function(){cc.tween(t.pageNode.getChildByName(t.currentPage.name)).to(.1,{position:cc.v3(t.listX[1],0,0),opacity:255},{easing:""}).start()},.05)},e.prototype.changeDot=function(t){this.dotNode.getChildByName(this.currentPage.name).getComponent(cc.Sprite).spriteFrame=this.listSF[t]},s([u(cc.Node)],e.prototype,"pageNode",void 0),s([u(cc.Node)],e.prototype,"dotNode",void 0),s([u(cc.Button)],e.prototype,"listBtn",void 0),s([u(cc.SpriteFrame)],e.prototype,"listSF",void 0),s([u(cc.Label)],e.prototype,"listLabel",void 0),s([r],e)}(cc.Component);i.default=p,cc._RF.pop()},{"./SlotTT.Controller":"SlotTT.Controller","./SlotTT.Music":"SlotTT.Music"}],"SlotTT.Music":[function(t,e,i){"use strict";cc._RF.push(e,"7d6d4IFf5JNgrZ4mmdpnpsh","SlotTT.Music");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=this&&this.__decorate||function(t,e,i,n){var o,s=arguments.length,a=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(a=(s<3?o(a):s>3?o(e,i,a):o(e,i))||a);return s>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(i,"__esModule",{value:!0}),i.SLOT_SOUND_TYPE=i.SLOT_MUSIC_TYPE=void 0;var a=cc._decorator,c=a.ccclass,l=a.property;(function(t){t[t.MAIN_MUSIC=0]="MAIN_MUSIC"})(i.SLOT_MUSIC_TYPE||(i.SLOT_MUSIC_TYPE={})),function(t){t[t.BTN_CLICK=0]="BTN_CLICK",t[t.BW_END=1]="BW_END",t[t.BW_LOOP=2]="BW_LOOP",t[t.BW_START=3]="BW_START",t[t.EXPAND_WILD=4]="EXPAND_WILD",t[t.EXPAND_WILD_PREMOVE=5]="EXPAND_WILD_PREMOVE",t[t.EXPAND_WILD_VOICE_1=6]="EXPAND_WILD_VOICE_1",t[t.EXPAND_WILD_VOICE_2=7]="EXPAND_WILD_VOICE_2",t[t.EXPAND_WILD_VOICE_3=8]="EXPAND_WILD_VOICE_3",t[t.JP_END=9]="JP_END",t[t.JP_LOOP=10]="JP_LOOP",t[t.JP_START=11]="JP_START",t[t.JPRACE_BASIC_TICKING_1=12]="JPRACE_BASIC_TICKING_1",t[t.JPRACE_BASIC_TICKING_2=13]="JPRACE_BASIC_TICKING_2",t[t.JPRACE_BASIC_TICKING_3=14]="JPRACE_BASIC_TICKING_3",t[t.JPRACE_COUNT_FULL_60=15]="JPRACE_COUNT_FULL_60",t[t.JPRACE_FINAL_TICKING_1=16]="JPRACE_FINAL_TICKING_1",t[t.JPRACE_FINAL_TICKING_2=17]="JPRACE_FINAL_TICKING_2",t[t.JPRACE_FINAL_TICKING_3=18]="JPRACE_FINAL_TICKING_3",t[t.JPRACE_JINGLE_3=19]="JPRACE_JINGLE_3",t[t.LINEWIN_LOOP=20]="LINEWIN_LOOP",t[t.LINEWIN_SINGLE_LINE_1=21]="LINEWIN_SINGLE_LINE_1",t[t.LINEWIN_SINGLE_LINE_2=22]="LINEWIN_SINGLE_LINE_2",t[t.LINEWIN_SINGLE_LINE_3=23]="LINEWIN_SINGLE_LINE_3",t[t.REEL_INTERUPT=24]="REEL_INTERUPT",t[t.REEL_SPIN=25]="REEL_SPIN",t[t.REEL_START=26]="REEL_START",t[t.REEL_STOP_1=27]="REEL_STOP_1",t[t.REEL_STOP_2=28]="REEL_STOP_2",t[t.REEL_STOP_3=29]="REEL_STOP_3",t[t.SCORE_1A=30]="SCORE_1A",t[t.SCORE_1B=31]="SCORE_1B",t[t.SCORE_1C=32]="SCORE_1C",t[t.SCORE_2A=33]="SCORE_2A",t[t.SCORE_2B=34]="SCORE_2B",t[t.SCORE_2C=35]="SCORE_2C",t[t.SCORE_3=36]="SCORE_3",t[t.SCORE_4=37]="SCORE_4",t[t.WIN_ROLLUP=38]="WIN_ROLLUP",t[t.WIN_ROLLUP_END=39]="WIN_ROLLUP_END"}(i.SLOT_SOUND_TYPE||(i.SLOT_SOUND_TYPE={}));var r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.mainBGM=[],e.listAuds=[],e.musicBtn=null,e._audioId=-1,e._fxId=-1,e._volume=1,e.musicStatus=!0,e}var i;return o(e,t),i=e,e.prototype.onLoad=function(){i.instance=this},e.prototype.onDestroy=function(){},e.prototype.init=function(){this.setSystemVolume(1)},e.prototype.getSystemVolume=function(){return this._volume},e.prototype.setSystemVolume=function(t){this._volume=t,cc.audioEngine.setVolume(this._audioId,t)},e.prototype.playType=function(t){var e=this.listAuds[t];e&&this.musicStatus&&this.playActionMusic(e)},e.prototype.playActionMusic=function(t){cc.audioEngine.play(t,!1,this._volume)},e.prototype.playSlotMusic=function(t){cc.audioEngine.stop(this._audioId);var e=this.mainBGM[t];e&&this.musicStatus&&(this._audioId=cc.audioEngine.play(e,!0,this._volume))},e.prototype.playLoop=function(t){cc.audioEngine.stop(this._fxId);var e=this.listAuds[t];e&&this.musicStatus&&(this._fxId=cc.audioEngine.play(e,!0,this._volume))},e.prototype.stopPlayLoop=function(){cc.audioEngine.stop(this._fxId)},e.prototype.stopSlotMusic=function(){cc.audioEngine.stop(this._audioId)},e.prototype.pauseSlotMusic=function(){cc.audioEngine.pause(this._audioId)},e.prototype.resumeSlotMusic=function(){cc.audioEngine.resume(this._audioId)},e.prototype.setMusicStatus=function(t){this.musicStatus=t},e.prototype.getMusicStatus=function(){return this.musicStatus},e.prototype.stopAll=function(){cc.audioEngine.stopAll()},e.instance=null,s([l(cc.AudioClip)],e.prototype,"mainBGM",void 0),s([l(cc.AudioClip)],e.prototype,"listAuds",void 0),s([l(cc.Node)],e.prototype,"musicBtn",void 0),i=s([c],e)}(cc.Component);i.default=r,cc._RF.pop()},{}],"SlotTT.ScreenUntils":[function(t,e,i){"use strict";cc._RF.push(e,"9976dK7a1NLPrZS4fbl62Oo","SlotTT.ScreenUntils");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=this&&this.__decorate||function(t,e,i,n){var o,s=arguments.length,a=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(a=(s<3?o(a):s>3?o(e,i,a):o(e,i))||a);return s>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(i,"__esModule",{value:!0}),i.StretchingType=void 0;var a=function(){function t(){}return t.HORIZONTAL=0,t.VERTICAL=1,t.FULL=2,t}();i.StretchingType=a;var c=cc._decorator,l=c.ccclass,r=c.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._stretching=-1,e.isSpine=!1,e}return o(e,t),Object.defineProperty(e.prototype,"stretching",{get:function(){return this._stretching},set:function(t){this._stretching=t},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){var t=this;this.node.getComponent(sp.Skeleton)?this.isSpine=!0:this.isSpine=!1,this.isSpine?this.updateSpine():this.updateStretching(),cc.view.setResizeCallback(function(){t.isSpine?t.updateSpine():t.updateStretching()})},e.prototype.calcResolutionRatio=function(){var t=cc.view.getDesignResolutionSize(),e=cc.view.getFrameSize();return e.height/e.width<t.height/t.width?e.height/t.height:e.width/t.width},e.prototype.updateStretching=function(){var t=this.calcResolutionRatio();switch(this.stretching){case a.HORIZONTAL:this.node.width=cc.view.getFrameSize().width/t;break;case a.VERTICAL:this.node.height=cc.view.getFrameSize().height/t;break;case a.FULL:this.node.width=cc.view.getFrameSize().width/t,this.node.height=cc.view.getFrameSize().height/t}},e.prototype.updateSpine=function(){var t=this.calcResolutionRatio();switch(this.stretching){case a.HORIZONTAL:this.node.scaleX=cc.view.getFrameSize().width/t/this.node.width+.11;break;case a.VERTICAL:this.node.scaleY=cc.view.getFrameSize().height/t/this.node.height+.1,this.node.y=-cc.view.getFrameSize().height/t/2;break;case a.FULL:cc.view.getFrameSize().width/t/this.node.width>cc.view.getFrameSize().height/t/this.node.height?(this.node.scaleX=cc.view.getFrameSize().width/t/this.node.width+.11,this.node.scaleY=cc.view.getFrameSize().width/t/this.node.width+.1):(this.node.scaleX=cc.view.getFrameSize().height/t/this.node.height+.11,this.node.scaleY=cc.view.getFrameSize().height/t/this.node.height+.1),this.node.y=-cc.view.getFrameSize().height/t/2}},s([r({type:cc.Integer})],e.prototype,"_stretching",void 0),s([r({type:cc.Integer,range:[0,2],slide:!0})],e.prototype,"stretching",null),s([l],e)}(cc.Component);i.default=u,cc._RF.pop()},{}],"SlotTT.Setting":[function(t,e,i){"use strict";cc._RF.push(e,"cfaa4pC9i1C1IdFn90l27hq","SlotTT.Setting");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=this&&this.__decorate||function(t,e,i,n){var o,s=arguments.length,a=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(a=(s<3?o(a):s>3?o(e,i,a):o(e,i))||a);return s>3&&a&&Object.defineProperty(e,i,a),a},a=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))(function(o,s){function a(t){try{l(n.next(t))}catch(e){s(e)}}function c(t){try{l(n.throw(t))}catch(e){s(e)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof i?e:new i(function(t){t(e)})).then(a,c)}l((n=n.apply(t,e||[])).next())})},c=this&&this.__generator||function(t,e){var i,n,o,s,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function c(t){return function(e){return l([t,e])}}function l(s){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===s[0]||2===s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(c){s=[6,c],n=0}finally{i=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}};Object.defineProperty(i,"__esModule",{value:!0});var l=t("../../framework/localize/LanguageMgr"),r=t("./SlotTT.Music"),u=cc._decorator,p=u.ccclass,h=u.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.volumeSlider=null,e.sliderFill=null,e.toggleState=[],e.soundToggle=null,e.vibrationToggle=null,e.languageToggler=null,e.maskLanguageOption=null,e.languageOptions=null,e.arrow=null,e.showLbl=null,e.volumeLv=0,e.languageOptionEnabled=!1,e.musicEnabled=!0,e.vibrationEnabled=!1,e}var i;return o(e,t),i=e,e.prototype.onLoad=function(){return a(this,void 0,void 0,function(){return c(this,function(){return i.instance=this,[2]})})},e.prototype.onEnable=function(){this.maskLanguageOption.height=0},e.prototype.sliderVolumeCallback=function(){this.sliderFill.fillRange=this.volumeSlider.progress,this.volumeLv=this.volumeSlider.progress,r.default.instance.setSystemVolume(this.volumeSlider.progress),this.volumeSlider.progress>0?this.musicEnabled=!0:this.musicEnabled=!1,this.updateMusic()},e.prototype.toggleLanguageOptions=function(){var t=this;r.default.instance.playType(r.SLOT_SOUND_TYPE.BTN_CLICK),this.languageToggler.interactable=!1,this.scheduleOnce(function(){return t.languageToggler.interactable=!0},.3),0==this.languageOptionEnabled?(this.languageOptionEnabled=!0,cc.tween(this.arrow).to(.2,{angle:180}).start(),cc.tween(this.maskLanguageOption).to(.2,{height:113}).start()):(this.languageOptionEnabled=!1,cc.tween(this.arrow).to(.2,{angle:0}).start(),cc.tween(this.maskLanguageOption).to(.2,{height:0}).start())},e.prototype.closeSettings=function(){r.default.instance.playType(r.SLOT_SOUND_TYPE.BTN_CLICK),this.node.active=!1},e.prototype.changeLanguage=function(t,e){var i,n;switch(Number(e)){case 0:i="en",n="English";break;case 1:i="vn",n="Vietnamese";break;case 2:i="tl",n="English";break;case 3:case 4:i="en",n="English"}this.showLbl.string=n,this.toggleLanguageOptions(),BGUI.ClientData.setString(BGUI.ClientDataKey.LANGUAGE,i),l.LanguageMgr.updateLang(i),cc.Canvas.instance.node.emit(BGUI.EVENT_GAMECORE.EVENT_UPDATE_LANGUAGE_LABEL,this),cc.Canvas.instance.node.emit(BGUI.EVENT_GAMECORE.EVENT_UPDATE_LANGUAGE_SPRITE,this),cc.Canvas.instance.node.emit(BGUI.EVENT_GAMECORE.EVENT_UPDATE_LANGUAGE_SPINE,this),BGUI.ClientData.setString(BGUI.ClientDataKey.LANGUAGE,i),l.LanguageMgr.instance.setCurrentLanguage(i),l.LanguageMgr.updateLocalization(i);for(var o=0;o<this.languageOptions.childrenCount;o++)this.languageOptions.children[o].getChildByName("Chosen").active=!1,o==e&&(this.languageOptions.children[o].getChildByName("Chosen").active=!0)},e.prototype.toggleMusic=function(){r.default.instance.playType(r.SLOT_SOUND_TYPE.BTN_CLICK),this.musicEnabled=!this.musicEnabled,this.updateMusic(),r.default.instance.setMusicStatus(this.musicEnabled)},e.prototype.updateMusic=function(){!1===this.musicEnabled?(this.sliderFill.fillRange=0,this.volumeSlider.progress=0,this.soundToggle.spriteFrame=this.toggleState[1],r.default.instance.setSystemVolume(0),r.default.instance.pauseSlotMusic()):(this.sliderFill.fillRange=this.volumeLv,this.volumeSlider.progress=this.volumeLv,this.soundToggle.spriteFrame=this.toggleState[0],r.default.instance.setSystemVolume(this.volumeSlider.progress),r.default.instance.resumeSlotMusic())},e.prototype.toggleVibration=function(){r.default.instance.playType(r.SLOT_SOUND_TYPE.BTN_CLICK),1==this.vibrationEnabled?(this.vibrationEnabled=!1,this.vibrationToggle.spriteFrame=this.toggleState[1]):(this.vibrationEnabled=!0,this.vibrationToggle.spriteFrame=this.toggleState[0])},e.instance=null,s([h(cc.Slider)],e.prototype,"volumeSlider",void 0),s([h(cc.Sprite)],e.prototype,"sliderFill",void 0),s([h(cc.SpriteFrame)],e.prototype,"toggleState",void 0),s([h(cc.Sprite)],e.prototype,"soundToggle",void 0),s([h(cc.Sprite)],e.prototype,"vibrationToggle",void 0),s([h(cc.Button)],e.prototype,"languageToggler",void 0),s([h(cc.Node)],e.prototype,"maskLanguageOption",void 0),s([h(cc.Node)],e.prototype,"languageOptions",void 0),s([h(cc.Node)],e.prototype,"arrow",void 0),s([h(cc.Label)],e.prototype,"showLbl",void 0),i=s([p],e)}(cc.Component);i.default=d,cc._RF.pop()},{"../../framework/localize/LanguageMgr":void 0,"./SlotTT.Music":"SlotTT.Music"}],"SlotTT.SlotMachine":[function(t,e,i){"use strict";cc._RF.push(e,"11260JKWOFJi6dwXvRF0zwk","SlotTT.SlotMachine");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=this&&this.__decorate||function(t,e,i,n){var o,s=arguments.length,a=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(a=(s<3?o(a):s>3?o(e,i,a):o(e,i))||a);return s>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(i,"__esModule",{value:!0});var a=t("./SlotTT.CellAnim"),c=t("./SlotTT.Cmd"),l=t("./SlotTT.Column"),r=t("./SlotTT.Common"),u=t("./SlotTT.Controller"),p=t("./SlotTT.Music"),h=cc._decorator,d=h.ccclass,f=h.property,g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.listSyms=[],e.columnPrefab=null,e.flyingLbl=null,e.columnContainer=null,e.pnHighLight=null,e.lblWin=null,e.hlLbl=[],e.bigWin=null,e.block=null,e.btnSkip=null,e.skipNode=null,e.totalWin=null,e.numberColumn=3,e.columnsAnim=[],e.columnResult=[[],[],[]],e.cellsAnim=[],e.thisRoundResult=null,e.totalWinMoney=0,e.currentBalance=0,e.winType=!1,e.profit=0,e.profitStep=0,e.totalProfit=0,e.isSkip=!1,e.isWild=!1,e.listWild=[],e.listPosLW=[[cc.v3(-442,210,0),cc.v3(0,210,0),cc.v3(444,210,0)],[cc.v3(-442,10,0),cc.v3(0,10,0),cc.v3(445,10,0)],[cc.v3(-442,-190,0),cc.v3(0,-200,0),cc.v3(445,-190,0)],[cc.v3(-442,210,0),cc.v3(0,10,0),cc.v3(445,-190,0)],[cc.v3(-442,-190,0),cc.v3(0,10,0),cc.v3(445,210,0)],[cc.v3(-442,210,0),cc.v3(0,-190,0),cc.v3(445,210,0)],[cc.v3(-442,-190,0),cc.v3(0,210,0),cc.v3(445,-190,0)],[cc.v3(-442,10,0),cc.v3(0,-190,0),cc.v3(445,10,0)]],e.listIndexLW=[[0,1,2],[3,4,5],[6,7,8],[0,4,8],[2,4,6],[0,2,7],[1,6,8],[3,5,7]],e.currentHL=-1,e.currentHLWin=-1,e}var i;return o(e,t),i=e,e.prototype.onLoad=function(){i.instance=this},e.prototype.forceStop=function(){},e.prototype.createMachine=function(t){this.columnContainer.removeAllChildren(),this.columnsAnim=[],this.processData(t);for(var e=0;e<this.numberColumn;e++){var i=cc.instantiate(this.columnPrefab);this.columnsAnim[e]=i,i.name=e.toString(),this.columnContainer.addChild(i);var n=i.getComponent(l.default);n.index=e;var o="";switch(e){case 0:o="spin_left";break;case 1:o="spin_mid";break;case 2:o="spin_right"}n.ske.setAnimation(0,o,!0),n.ske.node.active=!1,n.createColumnAnim(this.columnResult[e])}},e.prototype.startSpinVirtual=function(){var t=this;this.totalWin.string="",this.columnsAnim.forEach(function(t){t.children[0].active=!0}),this.listWild.forEach(function(e){var i=t.pnHighLight.getChildByName("ThanTai"+e);cc.tween(i).to(.1,{position:cc.v3(i.x,-500,0),scaleY:.2},{easing:""}).call(function(){i.scaleY=.72,i.active=!1,i.y=-300}).start()}),this.isWild=!1,this.listWild=[];var e=.05;u.default.instance.isTurbo&&(e=0),p.default.instance.playType(p.SLOT_SOUND_TYPE.REEL_START),p.default.instance.playLoop(p.SLOT_SOUND_TYPE.REEL_SPIN);for(var i=0;i<this.numberColumn;i++){var n=this.columnsAnim[i].getComponent(l.default);n.spinDirection=l.Direction.Down,n.spinVirtual(e*i)}},e.prototype.letGo=function(t){this.totalWinMoney=t.amountProfit,this.currentBalance=t.currentMoney,this.processData(t);for(var e=0;e<this.numberColumn;e++){var i=this.columnsAnim[e].getComponent(l.default);i.spinDirection=l.Direction.Down,i.pushData(this.columnResult[e],e)}},e.prototype.processData=function(t){this.thisRoundResult=t,this.columnResult=[[],[],[]];for(var e=0;e<t.itemList.length;e++){var i=e%3;this.columnResult[i].push(t.itemList[e]),3===t.itemList[e].id&&(this.isWild=!0,this.listWild.push(i))}this.checkWinType(t.betAmount,t.amountProfit)},e.prototype.reward=function(){var t=this;if(this.thisRoundResult.resultList.length>0){var e=0;this.isWild&&(e=1,this.runWild()),this.runFlyingNum(),this.scheduleOnce(function(){t.setActive(),t.runAnimLbl()},e+.3*(this.thisRoundResult.resultList.length-1)+.6)}else this.scheduleOnce(function(){u.default.instance.isJackPot&&(c.SlotCmd.Send.sendOpenJackpot(),u.default.instance.isAutoSpinning&&u.default.instance.onClickStopAutoSpin()),u.default.instance.isAutoSpinning?u.default.instance.checkAutoSpin():t.scheduleOnce(function(){u.default.instance.disableBtn(!0)},1)},.5)},e.prototype.runWild=function(){var t=this;this.listWild.forEach(function(e){t.columnsAnim[e].children[0].active=!1;var i=t.pnHighLight.getChildByName("ThanTai"+e);i.active=!0,i.getComponent(sp.Skeleton).setAnimation(0,"active",!1),p.default.instance.playType(p.SLOT_SOUND_TYPE.EXPAND_WILD_PREMOVE),t.scheduleOnce(function(){i.getComponent(sp.Skeleton).setAnimation(0,"idle",!0),p.default.instance.playType(p.SLOT_SOUND_TYPE.EXPAND_WILD)},1)}),this.scheduleOnce(function(){var t=r.default.getRandomNumber(6,8);p.default.instance.playType(t)})},e.prototype.runFlyingNum=function(){var t=this,e=0;this.thisRoundResult.resultList.length>1&&p.default.instance.playType(p.SLOT_SOUND_TYPE.LINEWIN_LOOP);for(var i=function(i){n.scheduleOnce(function(){var e=cc.instantiate(t.flyingLbl);e.getComponent(cc.Label).string=BGUI.Utils.formatMoneyWithCommaOnly(i.moneyWin),e.angle=t.getRandomAngle(),e.setPosition(t.listPosLW[i.id-1][0]),t.pnHighLight.addChild(e);var n=r.default.getRandomNumber(21,23);p.default.instance.playType(n),cc.tween(e).parallel(cc.tween(e).to(.25,{position:t.listPosLW[i.id-1][1]},{easing:""}),cc.tween(e).by(.25,{angle:t.getRandomAngle()},{easing:""})).call(function(){cc.tween(e).parallel(cc.tween(e).to(.35,{position:t.listPosLW[i.id-1][2]},{easing:"easeOut"}),cc.tween(e).by(.35,{angle:t.getRandomAngle()},{easing:"easeOut"})).call(function(){t.scheduleOnce(function(){e.removeFromParent()},.25)}).start()}).start()},e),e+=.3},n=this,o=0,s=this.thisRoundResult.resultList;o<s.length;o++)i(s[o])},e.prototype.setActive=function(){for(var t=0,e=this.cellsAnim;t<e.length;t++){var i=e[t].getComponent(a.default),n=i.getItemCell();n.highlight&&3!==n.id&&i.setAnim("active")}},e.prototype.runAnimLbl=function(){var t=this,e=2;if(this.lblWin.active=!0,this.isSkip=!1,this.winType)p.default.instance.stopAll(),p.default.instance.playType(p.SLOT_SOUND_TYPE.BW_START),this.scheduleOnce(function(){p.default.instance.playType(p.SLOT_SOUND_TYPE.BW_LOOP)},.5),e=21,this.block.active=!0,this.bigWin.active=!0,this.bigWin.getComponent(sp.Skeleton).setAnimation(0,"animation2",!1),this.scheduleOnce(function(){t.bigWin.getComponent(sp.Skeleton).setAnimation(0,"animation",!0)},4),cc.error(this.isSkip,e),this.scheduleForLbl(this.thisRoundResult.amountProfit,e-1),this.btnSkip.active=!0,this.activateSkipNode(!0),this.scheduleOnce(function(){t.bigWin.active&&(p.default.instance.playType(p.SLOT_SOUND_TYPE.BW_END),t.scheduleOnce(function(){p.default.instance.playSlotMusic(p.SLOT_MUSIC_TYPE.MAIN_MUSIC)},11),t.bigWin.active=!1,t.block.active=!1,t.btnSkip.active=!1,t.activateSkipNode(!1),t.lblUp(),t.scheduleOnce(function(){t.isSkip||t.finishSpin()},2))},e-1);else{this.scheduleForLbl(this.thisRoundResult.amountProfit,e-1);var i=this.thisRoundResult.resultList.length;if(this.isWild)switch(this.listWild.length){case 0:case 1:1===i?p.default.instance.playType(p.SLOT_SOUND_TYPE.SCORE_2A):2===i?p.default.instance.playType(p.SLOT_SOUND_TYPE.SCORE_2B):i>=3&&p.default.instance.playType(p.SLOT_SOUND_TYPE.SCORE_2C),this.scheduleOnce(function(){p.default.instance.playType(p.SLOT_SOUND_TYPE.WIN_ROLLUP_END)},.5);break;case 2:p.default.instance.playType(p.SLOT_SOUND_TYPE.SCORE_3),this.scheduleOnce(function(){p.default.instance.playType(p.SLOT_SOUND_TYPE.WIN_ROLLUP_END)},1);break;case 3:p.default.instance.playType(p.SLOT_SOUND_TYPE.SCORE_4),this.scheduleOnce(function(){p.default.instance.playType(p.SLOT_SOUND_TYPE.WIN_ROLLUP_END)},1.5)}else 1===i?p.default.instance.playType(p.SLOT_SOUND_TYPE.SCORE_1A):2===i?p.default.instance.playType(p.SLOT_SOUND_TYPE.SCORE_1B):i>=3&&p.default.instance.playType(p.SLOT_SOUND_TYPE.SCORE_1C),this.scheduleOnce(function(){p.default.instance.playType(p.SLOT_SOUND_TYPE.WIN_ROLLUP_END)},.5);this.activateSkipNode(!0),this.lblUp(),this.scheduleOnce(function(){t.isSkip||t.finishSpin()},3)}},e.prototype.finishSpin=function(){u.default.instance.increaseBalance(this.thisRoundResult.amountProfit),this.lblWin.active=!1,this.lblWin.setPosition(cc.v2(0,-150)),u.default.instance.isJackPot?(c.SlotCmd.Send.sendOpenJackpot(),u.default.instance.isAutoSpinning&&u.default.instance.onClickStopAutoSpin()):u.default.instance.isAutoSpinning?u.default.instance.checkAutoSpin():(this.highlight(),this.schedule(this.highlight,1.2,cc.macro.REPEAT_FOREVER,1.2),u.default.instance.isAutoSpinning||u.default.instance.disableBtn(!0))},e.prototype.highlight=function(){this.unHighLight(),this.getCurrentHL(),this.getHighlight()},e.prototype.getCurrentHL=function(){if(this.currentHL>=0)for(var t=0;t<this.thisRoundResult.resultList.length;t++){if(this.currentHL===this.thisRoundResult.resultList[this.thisRoundResult.resultList.length-1].id){this.currentHL=this.thisRoundResult.resultList[0].id,this.currentHLWin=this.thisRoundResult.resultList[0].moneyWin,u.default.instance.disableBtn(!0);break}if(this.currentHL===this.thisRoundResult.resultList[t].id){this.currentHL=this.thisRoundResult.resultList[t+1].id,this.currentHLWin=this.thisRoundResult.resultList[t+1].moneyWin;break}}else try{this.currentHL=this.thisRoundResult.resultList[0].id,this.currentHLWin=this.thisRoundResult.resultList[0].moneyWin}catch(e){cc.error(e)}},e.prototype.getHighlight=function(){if(this.listIndexLW[this.currentHL-1]){for(var t=0,e=this.listIndexLW[this.currentHL-1];t<e.length;t++){var i=e[t],n=this.pnHighLight.getChildByName(i.toString());n.active=!0,n.getComponent(sp.Skeleton).setAnimation(0,"avtive",!1)}this.getHLLbl(this.currentHL,this.currentHLWin)}},e.prototype.unHighLight=function(){for(var t=0;t<9;t++)this.pnHighLight.getChildByName(t.toString()).active=!1;for(var e=0,i=this.hlLbl;e<i.length;e++)i[e].active=!1},e.prototype.resetCurrentHL=function(){this.currentHL=-1},e.prototype.getHLLbl=function(t,e){switch(t-1){case 0:case 6:this.hlLbl[0].active=!0,this.hlLbl[0].getComponent(cc.Label).string=BGUI.Utils.formatMoneyWithCommaOnly(e);break;case 1:case 3:case 4:this.hlLbl[1].active=!0,this.hlLbl[1].getComponent(cc.Label).string=BGUI.Utils.formatMoneyWithCommaOnly(e);break;case 2:case 5:case 7:this.hlLbl[2].active=!0,this.hlLbl[2].getComponent(cc.Label).string=BGUI.Utils.formatMoneyWithCommaOnly(e)}},e.prototype.getRandomAngle=function(){var t=0;switch(r.default.getRandomNumber(0,2)){case 0:t=-7.5;break;case 1:t=0;break;case 2:t=7.5}return t},e.prototype.checkWinType=function(t,e){var i=Math.floor(e/t);this.winType=i>=10},e.prototype.scheduleForLbl=function(t,e){this.profit=0,this.totalProfit=t,this.profitStep=t/(100*e),this.schedule(this.increaseWinLbl,.001)},e.prototype.increaseWinLbl=function(){this.profit+=this.profitStep,this.profit>=this.totalProfit||this.isSkip?(this.unschedule(this.increaseWinLbl),this.lblWin.getComponent(cc.Label).string=BGUI.Utils.formatMoneyWithCommaOnly(this.totalProfit),this.btnSkip.active=!1,this.activateSkipNode(!1)):this.lblWin.getComponent(cc.Label).string=BGUI.Utils.formatMoneyWithCommaOnly(this.profit)},e.prototype.lblUp=function(){var t=this;cc.tween(this.lblWin).to(.5,{position:cc.v3(0,0,0)},{easing:""}).call(function(){t.scheduleOnce(function(){t.updateTotalWin()},.5)}).start()},e.prototype.updateTotalWin=function(){this.totalWin.string=BGUI.Utils.formatMoneyWithCommaOnly(this.thisRoundResult.amountProfit)},e.prototype.onClickSpin=function(){this.unschedule(this.highlight),this.unHighLight(),this.resetCurrentHL()},e.prototype.onClickSkip=function(){var t=this;this.isSkip=!0,this.bigWin.active&&(this.bigWin.active=!1,this.block.active=!1,this.lblUp(),p.default.instance.stopAll(),p.default.instance.playType(p.SLOT_SOUND_TYPE.BW_END),this.scheduleOnce(function(){p.default.instance.playSlotMusic(p.SLOT_MUSIC_TYPE.MAIN_MUSIC)},10)),!this.bigWin.active&&u.default.instance.isJackPot&&(p.default.instance.stopAll(),p.default.instance.playType(p.SLOT_SOUND_TYPE.JP_END),this.scheduleOnce(function(){u.default.instance.jackpot.active=!1,t.block.active=!1,t.lblWin.active=!1,u.default.instance.isJackPot=!1,p.default.instance.playSlotMusic(p.SLOT_MUSIC_TYPE.MAIN_MUSIC)},3)),this.btnSkip.active=!1,this.activateSkipNode(!1),this.unschedule(this.increaseWinLbl),this.lblWin.getComponent(cc.Label).string=BGUI.Utils.formatMoneyWithCommaOnly(this.totalProfit),this.scheduleOnce(function(){t.finishSpin()},2)},e.prototype.openJackPot=function(t){var e=this;this.block.active=!0,this.lblWin.active=!0,this.scheduleForLbl(t,12),this.btnSkip.active=!0,this.activateSkipNode(!0),p.default.instance.playType(p.SLOT_SOUND_TYPE.JP_START),this.scheduleOnce(function(){p.default.instance.playType(p.SLOT_SOUND_TYPE.JP_LOOP)},1.5),this.scheduleOnce(function(){p.default.instance.playType(p.SLOT_SOUND_TYPE.JP_END),e.btnSkip.active=!1,e.activateSkipNode(!1),e.scheduleOnce(function(){u.default.instance.jackpot.active=!1,e.block.active=!1,e.lblWin.active=!1,u.default.instance.isJackPot=!1},3)},12.5)},e.prototype.activateSkipNode=function(t){t?(this.skipNode.active=!0,this.skipNode.on(cc.Node.EventType.TOUCH_END,this.onClickSkip,this)):(this.skipNode.off(cc.Node.EventType.TOUCH_END,this.onClickSkip,this),this.skipNode.active=!1)},e.instance=null,s([f({type:sp.SkeletonData})],e.prototype,"listSyms",void 0),s([f(cc.Prefab)],e.prototype,"columnPrefab",void 0),s([f(cc.Prefab)],e.prototype,"flyingLbl",void 0),s([f(cc.Node)],e.prototype,"columnContainer",void 0),s([f(cc.Node)],e.prototype,"pnHighLight",void 0),s([f(cc.Node)],e.prototype,"lblWin",void 0),s([f(cc.Node)],e.prototype,"hlLbl",void 0),s([f(cc.Node)],e.prototype,"bigWin",void 0),s([f(cc.Node)],e.prototype,"block",void 0),s([f(cc.Node)],e.prototype,"btnSkip",void 0),s([f(cc.Node)],e.prototype,"skipNode",void 0),s([f(cc.Label)],e.prototype,"totalWin",void 0),i=s([d],e)}(cc.Component);i.default=g,cc._RF.pop()},{"./SlotTT.CellAnim":"SlotTT.CellAnim","./SlotTT.Cmd":"SlotTT.Cmd","./SlotTT.Column":"SlotTT.Column","./SlotTT.Common":"SlotTT.Common","./SlotTT.Controller":"SlotTT.Controller","./SlotTT.Music":"SlotTT.Music"}],demoData:[function(t,e,i){"use strict";cc._RF.push(e,"10aafB5dcZEXYL5T0o5D94w","demoData"),Object.defineProperty(i,"__esModule",{value:!0}),i.DEMO_DATA=void 0;var n=function(){function t(){}return t.data1={listLineWin:[1,2,3,4,5,6,7,8],listMulti:[23.5,23.5,23.5,23.5,23.5,23.5,23.5,23.5],listId:[3,5,4,8,3,3,9,7,6],idHL:[0,1,2,3,4,5,6,7,8]},t.data2={listLineWin:[1,2,3,4,5,6,7,8],listMulti:[.625,.25,.25,.25,.25,.25,.375,.25],listId:[8,8,8,9,7,9,8,7,8],idHL:[0,1,2,3,4,5,6,7,8]},t.data3={listLineWin:[1,2,3],listMulti:[.375,.625,2.25],listId:[9,9,9,8,8,8,6,6,6],idHL:[0,1,2,3,4,5,6,7,8]},t.data4={listLineWin:[6,8],listMulti:[1,1],listId:[7,5,7,7,4,7,9,7,4],idHL:[0,2,3,5,7]},t.data5={listLineWin:[4,5],listMulti:[.375,.375],listId:[9,5,9,8,9,4,9,5,9],idHL:[0,2,4,6,8]},t.data6={listLineWin:[2,4],listMulti:[.25,.375],listId:[8,6,4,9,8,8,4,4,8],idHL:[0,3,4,5,8]},t.data7={listLineWin:[1,2],listMulti:[.25,2.25],listId:[7,7,9,6,6,6,5,4,4],idHL:[0,1,2,3,4,5]},t.data8={listLineWin:[7,8],listMulti:[.25,3.5],listId:[4,8,6,5,4,5,8,5,7],idHL:[1,3,5,6,7,8]},t.data9={listLineWin:[1,4],listMulti:[.25,.25],listId:[7,8,4,6,7,3,9,4,6],idHL:[0,1,2,4,8]},t.data10={listLineWin:[6,7],listMulti:[2.25,.25],listId:[6,7,5,4,4,9,7,6,3],idHL:[0,1,2,6,7,8]},t.data11={listLineWin:[5,8],listMulti:[.25,2.25],listId:[3,5,9,6,8,6,9,6,4],idHL:[2,3,4,5,6,7]},t.data12={listLineWin:[3],listMulti:[7.25],listId:[5,8,6,8,8,6,4,4,4],idHL:[6,7,8]},t.data13={listLineWin:[4],listMulti:[3.5],listId:[5,4,6,7,5,9,6,4,5],idHL:[0,4,8]},t.data14={listLineWin:[5],listMulti:[1],listId:[5,6,7,4,7,6,7,5,4],idHL:[2,4,6]},t.data15={listLineWin:[6],listMulti:[.625],listId:[8,4,8,5,5,6,4,8,5],idHL:[0,2,7]},t.data16={listLineWin:[7],listMulti:[.375],listId:[6,9,6,4,5,5,9,4,9],idHL:[1,6,8]},t.data17={listLineWin:[8],listMulti:[.25],listId:[5,6,6,8,5,9,4,7,4],idHL:[3,5,7]},t.data18={listLineWin:[],listMulti:[],listId:[5,6,9,9,6,4,8,8,4],idHL:[]},t.data19={listLineWin:[],listMulti:[],listId:[6,6,9,4,6,8,6,4,9],idHL:[]},t.data20={listLineWin:[],listMulti:[],listId:[7,7,5,8,6,8,4,5,5],idHL:[]},t.data21={listLineWin:[],listMulti:[],listId:[5,7,6,5,8,6,5,5,9],idHL:[]},t.data22={listLineWin:[],listMulti:[],listId:[9,4,9,8,6,8,6,5,9],idHL:[]},t.data23={listLineWin:[],listMulti:[],listId:[8,6,4,7,8,4,4,9,6],idHL:[]},t.data24={listLineWin:[],listMulti:[],listId:[9,5,6,5,4,9,8,5,7],idHL:[]},t.data25={listLineWin:[],listMulti:[],listId:[4,7,9,6,5,5,6,9,6],idHL:[]},t.data26={listLineWin:[],listMulti:[],listId:[6,7,7,5,8,4,5,7,9],idHL:[]},t.data27={listLineWin:[],listMulti:[],listId:[6,5,4,8,6,5,8,4,8],idHL:[]},t.data28={listLineWin:[],listMulti:[],listId:[4,4,6,7,9,6,4,6,5],idHL:[]},t.data29={listLineWin:[],listMulti:[],listId:[6,4,7,9,5,6,5,9,6],idHL:[]},t.data30={listLineWin:[],listMulti:[],listId:[6,7,8,5,6,8,5,8,8],idHL:[]},t}();i.DEMO_DATA=n,cc._RF.pop()},{}]},{},["SlotTT.CellAnim","SlotTT.Cmd","SlotTT.Column","SlotTT.Common","SlotTT.Connector","SlotTT.Controller","SlotTT.Info","SlotTT.Music","SlotTT.ScreenUntils","SlotTT.Setting","SlotTT.SlotMachine","demoData"]);